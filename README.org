* mw2slob
  This is a tool to create MediaWiki content to
  [[https://github.com/itkach/slob][slob]] dictionaries from
  [[https://dumps.wikimedia.org/other/enterprise_html/][Wikimedia
  Enterprise HTML Dumps]] or from CouchDB instances created by
  [[https://github.com/itkach/mwscrape][mwscrape]].

  Note that HTML dumps are different from HTML retrieved via
  MediaWiki API (mwscrape), e.g. pages do not include table of
  contents. Also, article title aliases from language links are only
  available via ~mwscrape~.

** Installation

   ``mw2slob`` depends on the following components:

   - [[http://github.org/itkach/slob/][Slob]]
   - [[https://github.com/djc/couchdb-python/][couchdb-python]]
   - [[http://lxml.de][lxml]]
   - [[https://pythonhosted.org/cssselect/][cssselect]]
   - [[http://pythonhosted.org/cssutils/][cssutils]]
   - [[https://www.crummy.com/software/BeautifulSoup/][BeautifulSoup]]

   Install ``lxml`` (consult your operating system documentation for
   installation instructions). For example, on Ubuntu:

   #+BEGIN_SRC sh
   sudo apt-get install python3-lxml
   #+END_SRC

   Create Python virtual environment and install slob.py as
   described at https://github.com/itkach/slob/.

   In this virtual environment run

   #+BEGIN_SRC sh
   pip install git+https://github.com/itkach/mw2slob.git
   #+END_SRC

** Usage

*** With WE HTML Dumps
    #+BEGIN_SRC sh
      # get site's metadata ("siteinfo")
      mw2slob siteinfo http://en.wiktionary.org > enwikt.si.json
      # compile dictionary
      mw2slob dump --siteinfo enwikt.si.json ./enwiktionary-NS0-20220120-ENTERPRISE-HTML.json.tar.gz -f wikt common
    #+END_SRC

    See ~mw2slob dump --help~ for complete list of options.

*** With ~mwscrape~ database

   Assuming CouchDB server runs at localhost on port
   ~5984~ and has mwscrape database created with ~mwscrape
   simple.wikipedia.org~ and named /simple-wikipedia-org/,
   to create a slob using /common/ and /wiki/ content filters:

   #+BEGIN_SRC sh
   mw2slob scrape http://127.0.0.1:5984/simple-wikipedia-org -f common wiki
   #+END_SRC

   See ~mw2slob scrape --help~ for complete list of options
